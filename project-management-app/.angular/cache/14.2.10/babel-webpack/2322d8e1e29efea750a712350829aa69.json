{"ast":null,"code":"import { ElementRef } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { L10N_CONFIG, L10N_LOCALE } from 'angular-l10n';\nimport { NavigationEnd } from '@angular/router';\nimport { startSearchState } from 'src/app/store/actions/search.actions';\nimport { logOut, updateAuthStateFromLocalStorage } from '../../../store/actions/auth.actions';\nimport { getUserId } from '../../../store/selectors/auth.selectors';\nimport { getLoadStatus, getMessage } from '../../../store/selectors/notifications.selectors';\nimport { setMessage } from '../../../store/actions/notifications.actions';\nimport { NotificationSnackBarComponent } from '../../../shared/components/notification-snack-bar/notification-snack-bar.component';\nimport { Languages } from '../../constants/l10n-config';\nimport { i18nAsset } from '../../constants/i18n';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/store\";\nimport * as i2 from \"@angular/material/dialog\";\nimport * as i3 from \"@angular/material/snack-bar\";\nimport * as i4 from \"angular-l10n\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/material/button\";\nimport * as i8 from \"@angular/material/toolbar\";\nimport * as i9 from \"@angular/forms\";\nimport * as i10 from \"@angular/material/form-field\";\nimport * as i11 from \"@angular/material/icon\";\nimport * as i12 from \"@angular/material/tooltip\";\nimport * as i13 from \"@angular/material/input\";\nimport * as i14 from \"@angular/material/progress-spinner\";\nconst _c0 = [\"langs\"];\nconst _c1 = [\"searchInput\"];\n\nfunction HeaderComponent_ng_container_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"form\", 11)(2, \"mat-form-field\", 12)(3, \"input\", 13, 14);\n    i0.ɵɵlistener(\"keyup\", function HeaderComponent_ng_container_14_Template_input_keyup_3_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.search());\n    });\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate(\"placeholder\", i0.ɵɵpipeBind2(5, 1, \"header.taskSearchInputPH\", ctx_r1.locale.language));\n  }\n}\n\nfunction HeaderComponent_ng_container_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"button\", 15);\n    i0.ɵɵtext(2, \" header.btnBoards \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n}\n\nfunction HeaderComponent_ng_container_20_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"button\", 20);\n    i0.ɵɵtext(2, \"Administra\\u00E7\\u00E3o\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"mat-menu\", null, 21)(5, \"button\", 22);\n    i0.ɵɵtext(6, \"Gerenciar Empresas\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const _r11 = i0.ɵɵreference(4);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"matMenuTriggerFor\", _r11);\n  }\n}\n\nfunction HeaderComponent_ng_container_20_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"button\", 20);\n    i0.ɵɵtext(2, \"Empresa\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"mat-menu\", null, 23)(5, \"button\", 24);\n    i0.ɵɵtext(6, \"Gerenciar Projetistas\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"button\", 25);\n    i0.ɵɵtext(8, \"Gerenciar Equipes\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const _r12 = i0.ɵɵreference(4);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"matMenuTriggerFor\", _r12);\n  }\n}\n\nfunction HeaderComponent_ng_container_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, HeaderComponent_ng_container_20_ng_container_1_Template, 7, 1, \"ng-container\", 16);\n    i0.ɵɵtemplate(2, HeaderComponent_ng_container_20_ng_container_2_Template, 9, 1, \"ng-container\", 16);\n    i0.ɵɵelementStart(3, \"button\", 17);\n    i0.ɵɵtext(4, \"Minha Conta\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"button\", 18);\n    i0.ɵɵpipe(6, \"translate\");\n    i0.ɵɵelementStart(7, \"mat-icon\");\n    i0.ɵɵtext(8, \"account_circle\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_ng_container_20_Template_button_click_9_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.onLogout());\n    });\n    i0.ɵɵpipe(10, \"translate\");\n    i0.ɵɵelementStart(11, \"mat-icon\");\n    i0.ɵɵtext(12, \"logout\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"appRoleHasPermission\", \"admin\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"appRoleHasPermission\", \"company\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate(\"matTooltip\", i0.ɵɵpipeBind2(6, 4, \"header.btnEditTooltip\", ctx_r3.locale.language));\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate(\"matTooltip\", i0.ɵɵpipeBind2(10, 7, \"header.btnLogOutTooltip\", ctx_r3.locale.language));\n  }\n}\n\nfunction HeaderComponent_ng_container_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"button\", 26);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementStart(3, \"mat-icon\");\n    i0.ɵɵtext(4, \"login\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"button\", 27);\n    i0.ɵɵpipe(6, \"translate\");\n    i0.ɵɵelementStart(7, \"mat-icon\");\n    i0.ɵɵtext(8, \"add_circle\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"matTooltip\", i0.ɵɵpipeBind2(2, 2, \"header.btnLogInTooltip\", ctx_r4.locale.language));\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate(\"matTooltip\", i0.ɵɵpipeBind2(6, 5, \"header.btnCreateTooltip\", ctx_r4.locale.language));\n  }\n}\n\nfunction HeaderComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28);\n    i0.ɵɵelement(1, \"mat-spinner\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nconst SNACK_BAR_TIME_DELAY_MS = 1500;\nexport class HeaderComponent {\n  constructor(store, dialog, snackBar, locale, l10nConfig, translation, router) {\n    this.store = store;\n    this.dialog = dialog;\n    this.snackBar = snackBar;\n    this.locale = locale;\n    this.l10nConfig = l10nConfig;\n    this.translation = translation;\n    this.router = router;\n    this.isLogged = false;\n    this.isLoad = false;\n    this.isBoardsRoute = false;\n    this.isSearchRoute = false;\n    this.userId = '';\n    this.lang = this.translation.getLocale().language.toUpperCase();\n    this.schema = this.l10nConfig.schema;\n    this.EN = this.schema[0].locale;\n    this.RU = this.schema[1].locale;\n    this.subscription = new Subscription();\n  }\n\n  ngOnInit() {\n    this.store.dispatch(updateAuthStateFromLocalStorage());\n    this.router.events.subscribe(event => {\n      if (event instanceof NavigationEnd) {\n        const {\n          url\n        } = event;\n\n        if (url !== '/boards') {\n          this.isBoardsRoute = false;\n        } else {\n          this.isBoardsRoute = true;\n        }\n\n        if (url === '/boards/search') {\n          this.isSearchRoute = true;\n        } else {\n          this.isSearchRoute = false;\n        }\n      }\n    });\n    const subUserId = this.store.select(getUserId).subscribe(id => {\n      this.isLogged = !!id;\n\n      if (id) {\n        this.userId = id;\n      }\n    });\n    this.subscription.add(subUserId);\n    const subMsg = this.store.select(getMessage).subscribe(msg => {\n      if (msg) {\n        this.snackBar.openFromComponent(NotificationSnackBarComponent, {\n          data: msg,\n          duration: SNACK_BAR_TIME_DELAY_MS\n        });\n        this.store.dispatch(setMessage({\n          msg: null\n        }));\n      }\n    });\n    this.subscription.add(subMsg);\n    const subLoad = this.store.select(getLoadStatus).subscribe(status => {\n      this.isLoad = status;\n    });\n    this.subscription.add(subLoad);\n\n    if (localStorage.getItem('lang')) {\n      this.lang = localStorage.getItem('lang');\n      if (this.lang === Languages.english) this.translation.setLocale(this.EN);\n      if (this.lang === Languages.russian) this.translation.setLocale(this.RU);\n    } else {\n      localStorage.setItem('lang', this.lang);\n    }\n\n    this.translation.addProviders([{\n      name: 'lazy',\n      asset: i18nAsset\n    }]);\n    this.translation.loadTranslation([{\n      name: 'lazy',\n      asset: i18nAsset\n    }]);\n  }\n\n  ngOnDestroy() {\n    this.subscription.unsubscribe();\n  }\n\n  logout() {\n    this.isLogged = false;\n    this.store.dispatch(logOut());\n  }\n\n  setLocale() {\n    if (this.langs.nativeElement.value === Languages.english) {\n      this.translation.setLocale(this.EN);\n      this.lang = Languages.english;\n    }\n\n    if (this.langs.nativeElement.value === Languages.russian) {\n      this.translation.setLocale(this.RU);\n      this.lang = Languages.russian;\n    }\n\n    localStorage.setItem('lang', this.lang);\n  }\n\n  search() {\n    this.store.dispatch(startSearchState({\n      userId: this.userId,\n      value: this.searchValue.nativeElement.value\n    }));\n  }\n\n}\n\nHeaderComponent.ɵfac = function HeaderComponent_Factory(t) {\n  return new (t || HeaderComponent)(i0.ɵɵdirectiveInject(i1.Store), i0.ɵɵdirectiveInject(i2.MatDialog), i0.ɵɵdirectiveInject(i3.MatSnackBar), i0.ɵɵdirectiveInject(L10N_LOCALE), i0.ɵɵdirectiveInject(L10N_CONFIG), i0.ɵɵdirectiveInject(i4.L10nTranslationService), i0.ɵɵdirectiveInject(i5.Router));\n};\n\nHeaderComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: HeaderComponent,\n  selectors: [[\"app-header\"]],\n  viewQuery: function HeaderComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n      i0.ɵɵviewQuery(_c1, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.langs = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.searchValue = _t.first);\n    }\n  },\n  decls: 25,\n  vars: 15,\n  consts: [[\"color\", \"primary\", 1, \"header\"], [\"routerLink\", \"/\", 1, \"logo\"], [1, \"spacer\"], [1, \"header__select\"], [\"matNativeControl\", \"\", \"required\", \"\", 1, \"header__lang\", 3, \"change\"], [\"langs\", \"\"], [\"value\", \"EN\", 3, \"selected\"], [\"value\", \"RU\", 3, \"selected\"], [4, \"ngIf\"], [\"mat-button\", \"\", \"routerLink\", \"/boards\"], [\"class\", \"loading\", 4, \"ngIf\"], [1, \"search\"], [\"appearance\", \"fill\", 1, \"search__input\"], [\"type\", \"search\", \"matInput\", \"\", 3, \"placeholder\", \"keyup\"], [\"searchInput\", \"\"], [\"mat-raised-button\", \"\", \"color\", \"accent\", \"routerLink\", \"/boards\", \"l10nTranslate\", \"\"], [4, \"appRoleHasPermission\"], [\"mat-button\", \"\", \"routerLink\", \"/account\"], [\"mat-button\", \"\", \"routerLink\", \"/login/profile\", 1, \"header__btn--profile\", 3, \"matTooltip\"], [\"mat-button\", \"\", 1, \"header__btn--logout\", 3, \"matTooltip\", \"click\"], [\"mat-button\", \"\", 3, \"matMenuTriggerFor\"], [\"adminMenu\", \"matMenu\"], [\"mat-menu-item\", \"\", \"routerLink\", \"/admin/companies\"], [\"companyMenu\", \"matMenu\"], [\"mat-menu-item\", \"\", \"routerLink\", \"/company/designers\"], [\"mat-menu-item\", \"\", \"routerLink\", \"/company/teams\"], [\"mat-button\", \"\", \"routerLink\", \"/auth/sign-in\", 1, \"header__btn--profile\", 3, \"matTooltip\"], [\"mat-button\", \"\", \"routerLink\", \"/auth/sign-up\", 1, \"header__btn--logout\", 3, \"matTooltip\"], [1, \"loading\"]],\n  template: function HeaderComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"mat-toolbar\", 0)(1, \"span\")(2, \"a\", 1);\n      i0.ɵɵtext(3, \"Meu App\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(4, \"span\", 2);\n      i0.ɵɵelementStart(5, \"mat-form-field\", 3)(6, \"mat-label\");\n      i0.ɵɵtext(7, \"Idioma\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"select\", 4, 5);\n      i0.ɵɵlistener(\"change\", function HeaderComponent_Template_select_change_8_listener() {\n        return ctx.setLocale();\n      });\n      i0.ɵɵelementStart(10, \"option\", 6);\n      i0.ɵɵtext(11, \"EN\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"option\", 7);\n      i0.ɵɵtext(13, \"RU\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtemplate(14, HeaderComponent_ng_container_14_Template, 6, 4, \"ng-container\", 8);\n      i0.ɵɵpipe(15, \"async\");\n      i0.ɵɵtemplate(16, HeaderComponent_ng_container_16_Template, 3, 0, \"ng-container\", 8);\n      i0.ɵɵpipe(17, \"async\");\n      i0.ɵɵelementStart(18, \"button\", 9);\n      i0.ɵɵtext(19, \"Quadros\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(20, HeaderComponent_ng_container_20_Template, 13, 10, \"ng-container\", 8);\n      i0.ɵɵpipe(21, \"async\");\n      i0.ɵɵtemplate(22, HeaderComponent_ng_container_22_Template, 9, 8, \"ng-container\", 8);\n      i0.ɵɵpipe(23, \"async\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(24, HeaderComponent_div_24_Template, 2, 0, \"div\", 10);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"selected\", ctx.lang === \"EN\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"selected\", ctx.lang === \"RU\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(15, 7, ctx.isLoggedIn$) && (ctx.isBoardsRoute || ctx.isSearchRoute));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(17, 9, ctx.isLoggedIn$) && !ctx.isBoardsRoute);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(21, 11, ctx.isLoggedIn$));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", !i0.ɵɵpipeBind1(23, 13, ctx.isLoggedIn$));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.isLoad);\n    }\n  },\n  dependencies: [i6.NgIf, i7.MatButton, i8.MatToolbar, i9.ɵNgNoValidate, i9.NgSelectOption, i9.ɵNgSelectMultipleOption, i9.NgControlStatusGroup, i9.NgForm, i10.MatFormField, i10.MatLabel, i11.MatIcon, i12.MatTooltip, i13.MatInput, i5.RouterLink, i5.RouterLinkWithHref, i14.MatProgressSpinner, i4.L10nTranslateDirective, i6.AsyncPipe, i4.L10nTranslatePipe],\n  styles: [\".header[_ngcontent-%COMP%] {\\n  width: 100%;\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n  height: 10vh;\\n  padding: 10px;\\n}\\n@media screen and (max-width: 580px) {\\n  .header[_ngcontent-%COMP%] {\\n    height: max-content;\\n    flex-wrap: wrap;\\n  }\\n}\\n.header__lang[_ngcontent-%COMP%] {\\n  padding: 3px;\\n  border-radius: 5px;\\n  background-color: #fff;\\n  color: #000;\\n  width: max-content;\\n}\\n.header__login[_ngcontent-%COMP%] {\\n  margin-left: auto;\\n}\\n.header__select[_ngcontent-%COMP%] {\\n  max-width: 45px;\\n}\\n.loading[_ngcontent-%COMP%] {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n  z-index: 5000;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n}\\n@media screen and (max-width: 580px) {\\n  .search[_ngcontent-%COMP%] {\\n    order: 1;\\n    width: 80vw;\\n    margin: 0 auto;\\n  }\\n}\\n.search__input[_ngcontent-%COMP%] {\\n  border-radius: 10px;\\n  padding-left: 5px;\\n  width: 30vw;\\n}\\n.search__input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder {\\n  color: #fff;\\n}\\n@media screen and (max-width: 800px) {\\n  .search__input[_ngcontent-%COMP%] {\\n    width: 40vw;\\n  }\\n}\\n@media screen and (max-width: 580px) {\\n  .search__input[_ngcontent-%COMP%] {\\n    width: 100%;\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhlYWRlci5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLFdBQUE7RUFDQSxhQUFBO0VBQ0EsbUJBQUE7RUFDQSw4QkFBQTtFQUNBLFlBQUE7RUFDQSxhQUFBO0FBQ0Y7QUFDRTtFQVJGO0lBU0ksbUJBQUE7SUFDQSxlQUFBO0VBRUY7QUFDRjtBQUFFO0VBQ0UsWUFBQTtFQUNBLGtCQUFBO0VBQ0Esc0JBQUE7RUFDQSxXQUFBO0VBQ0Esa0JBQUE7QUFFSjtBQUNFO0VBQ0UsaUJBQUE7QUFDSjtBQUVFO0VBQ0UsZUFBQTtBQUFKO0FBSUE7RUFDRSxrQkFBQTtFQUNBLE1BQUE7RUFDQSxPQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7RUFDQSxhQUFBO0VBQ0EsYUFBQTtFQUNBLHVCQUFBO0VBQ0EsbUJBQUE7QUFERjtBQUtFO0VBREY7SUFFSSxRQUFBO0lBQ0EsV0FBQTtJQUNBLGNBQUE7RUFERjtBQUNGO0FBRUU7RUFDRSxtQkFBQTtFQUNBLGlCQUFBO0VBQ0EsV0FBQTtBQUFKO0FBRUk7RUFDRSxXQUFBO0FBQU47QUFHSTtFQVRGO0lBVUksV0FBQTtFQUFKO0FBQ0Y7QUFDSTtFQVpGO0lBYUksV0FBQTtFQUVKO0FBQ0YiLCJmaWxlIjoiaGVhZGVyLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmhlYWRlciB7XG4gIHdpZHRoOiAxMDAlO1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gIGhlaWdodDogMTB2aDtcbiAgcGFkZGluZzogMTBweDtcblxuICBAbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA1ODBweCkge1xuICAgIGhlaWdodDogbWF4LWNvbnRlbnQ7XG4gICAgZmxleC13cmFwOiB3cmFwO1xuICB9XG5cbiAgJl9fbGFuZyB7XG4gICAgcGFkZGluZzogM3B4O1xuICAgIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICAgIGNvbG9yOiAjMDAwO1xuICAgIHdpZHRoOiBtYXgtY29udGVudDtcbiAgfVxuXG4gICZfX2xvZ2luIHtcbiAgICBtYXJnaW4tbGVmdDogYXV0bztcbiAgfVxuXG4gICZfX3NlbGVjdCB7XG4gICAgbWF4LXdpZHRoOiA0NXB4O1xuICB9XG59XG5cbi5sb2FkaW5nIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDA7XG4gIGxlZnQ6IDA7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDEwMCU7XG4gIHotaW5kZXg6IDUwMDA7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xufVxuXG4uc2VhcmNoIHtcbiAgQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogNTgwcHgpIHtcbiAgICBvcmRlcjogMTtcbiAgICB3aWR0aDogODB2dztcbiAgICBtYXJnaW46IDAgYXV0bztcbiAgfVxuICAmX19pbnB1dCB7XG4gICAgYm9yZGVyLXJhZGl1czogMTBweDtcbiAgICBwYWRkaW5nLWxlZnQ6IDVweDtcbiAgICB3aWR0aDogMzB2dztcblxuICAgIGlucHV0OjpwbGFjZWhvbGRlciB7XG4gICAgICBjb2xvcjogI2ZmZjtcbiAgICB9XG5cbiAgICBAbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA4MDBweCkge1xuICAgICAgd2lkdGg6IDQwdnc7XG4gICAgfVxuICAgIEBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDU4MHB4KSB7XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICB9XG4gIH1cbn1cbiJdfQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["ElementRef","Subscription","L10N_CONFIG","L10N_LOCALE","NavigationEnd","startSearchState","logOut","updateAuthStateFromLocalStorage","getUserId","getLoadStatus","getMessage","setMessage","NotificationSnackBarComponent","Languages","i18nAsset","i0","SNACK_BAR_TIME_DELAY_MS","HeaderComponent","constructor","store","dialog","snackBar","locale","l10nConfig","translation","router","getLocale","language","toUpperCase","schema","ngOnInit","dispatch","events","subscribe","event","url","isBoardsRoute","isSearchRoute","subUserId","select","id","isLogged","userId","subscription","add","subMsg","msg","openFromComponent","data","duration","subLoad","status","isLoad","localStorage","getItem","lang","english","setLocale","EN","russian","RU","setItem","addProviders","name","asset","loadTranslation","ngOnDestroy","unsubscribe","logout","langs","nativeElement","value","search","searchValue","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["E:\\project-management-app-main\\project-management-app-main\\project-management-app\\src\\app\\core\\components\\header\\header.component.ts","E:\\project-management-app-main\\project-management-app-main\\project-management-app\\src\\app\\core\\components\\header\\header.component.html"],"sourcesContent":["import { Component, OnDestroy, OnInit, Inject, ElementRef, ViewChild } from '@angular/core';\nimport { Store } from '@ngrx/store';\nimport { Subscription } from 'rxjs';\nimport { MatDialog } from '@angular/material/dialog';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport {\n  L10N_CONFIG,\n  L10nConfig,\n  L10N_LOCALE,\n  L10nLocale,\n  L10nTranslationService,\n} from 'angular-l10n';\nimport { L10nSchema } from 'angular-l10n/lib/models/types';\nimport { NavigationEnd, Router } from '@angular/router';\nimport { startSearchState } from 'src/app/store/actions/search.actions';\nimport { logOut, updateAuthStateFromLocalStorage } from '../../../store/actions/auth.actions';\nimport { getUserId } from '../../../store/selectors/auth.selectors';\nimport { getLoadStatus, getMessage } from '../../../store/selectors/notifications.selectors';\nimport { setMessage } from '../../../store/actions/notifications.actions';\nimport { NotificationSnackBarComponent } from '../../../shared/components/notification-snack-bar/notification-snack-bar.component';\nimport { Languages } from '../../constants/l10n-config';\nimport { i18nAsset } from '../../constants/i18n';\n\nconst SNACK_BAR_TIME_DELAY_MS = 1500;\n\n@Component({\n  selector: 'app-header',\n  templateUrl: './header.component.html',\n  styleUrls: ['./header.component.scss'],\n})\nexport class HeaderComponent implements OnInit, OnDestroy {\n  isLogged = false;\n\n  isLoad = false;\n\n  isBoardsRoute = false;\n\n  isSearchRoute = false;\n\n  userId = '';\n\n  lang: string | null = this.translation.getLocale().language.toUpperCase();\n\n  schema: L10nSchema[] = this.l10nConfig.schema;\n\n  EN = this.schema[0].locale;\n\n  RU = this.schema[1].locale;\n\n  @ViewChild('langs') langs!: ElementRef;\n\n  @ViewChild('searchInput') searchValue!: ElementRef;\n\n  subscription = new Subscription();\n\n  constructor(\n    private store: Store,\n    public dialog: MatDialog,\n    private snackBar: MatSnackBar,\n    @Inject(L10N_LOCALE) public locale: L10nLocale,\n    @Inject(L10N_CONFIG) private l10nConfig: L10nConfig,\n    private translation: L10nTranslationService,\n    private router: Router,\n  ) {}\n\n  ngOnInit() {\n    this.store.dispatch(updateAuthStateFromLocalStorage());\n\n    this.router.events.subscribe((event) => {\n      if (event instanceof NavigationEnd) {\n        const { url } = event;\n        if (url !== '/boards') {\n          this.isBoardsRoute = false;\n        } else {\n          this.isBoardsRoute = true;\n        }\n        if (url === '/boards/search') {\n          this.isSearchRoute = true;\n        } else {\n          this.isSearchRoute = false;\n        }\n      }\n    });\n\n    const subUserId = this.store.select(getUserId).subscribe((id) => {\n      this.isLogged = !!id;\n      if (id) {\n        this.userId = id;\n      }\n    });\n    this.subscription.add(subUserId);\n\n    const subMsg = this.store.select(getMessage).subscribe((msg) => {\n      if (msg) {\n        this.snackBar.openFromComponent(NotificationSnackBarComponent, {\n          data: msg,\n          duration: SNACK_BAR_TIME_DELAY_MS,\n        });\n        this.store.dispatch(setMessage({ msg: null }));\n      }\n    });\n    this.subscription.add(subMsg);\n\n    const subLoad = this.store.select(getLoadStatus).subscribe((status) => {\n      this.isLoad = status;\n    });\n    this.subscription.add(subLoad);\n\n    if (localStorage.getItem('lang')) {\n      this.lang = localStorage.getItem('lang');\n      if (this.lang === Languages.english) this.translation.setLocale(this.EN);\n      if (this.lang === Languages.russian) this.translation.setLocale(this.RU);\n    } else {\n      localStorage.setItem('lang', this.lang!);\n    }\n\n    this.translation.addProviders([{ name: 'lazy', asset: i18nAsset }]);\n    this.translation.loadTranslation([{ name: 'lazy', asset: i18nAsset }]);\n  }\n\n  ngOnDestroy() {\n    this.subscription.unsubscribe();\n  }\n\n  logout() {\n    this.isLogged = false;\n    this.store.dispatch(logOut());\n  }\n\n  setLocale(): void {\n    if (this.langs.nativeElement.value === Languages.english) {\n      this.translation.setLocale(this.EN);\n      this.lang = Languages.english;\n    }\n    if (this.langs.nativeElement.value === Languages.russian) {\n      this.translation.setLocale(this.RU);\n      this.lang = Languages.russian;\n    }\n    localStorage.setItem('lang', this.lang!);\n  }\n\n  search() {\n    this.store.dispatch(\n      startSearchState({ userId: this.userId, value: this.searchValue.nativeElement.value }),\n    );\n  }\n}\n","<mat-toolbar class=\"header\" color=\"primary\">\n  <span><a routerLink=\"/\" class=\"logo\">Meu App</a></span>\n\n  <span class=\"spacer\"></span>\n\n  <mat-form-field class=\"header__select\">\n    <mat-label>Idioma</mat-label>\n    <select matNativeControl #langs required class=\"header__lang\" (change)=\"setLocale()\">\n      <option value=\"EN\" [selected]=\"lang === 'EN'\">EN</option>\n      <option value=\"RU\" [selected]=\"lang === 'RU'\">RU</option>\n      </select>\n  </mat-form-field>\n\n  <ng-container *ngIf=\"(isLoggedIn$ | async) && (isBoardsRoute || isSearchRoute)\">\n    <form class=\"search\">\n      <mat-form-field class=\"search__input\" appearance=\"fill\">\n        <input type=\"search\" #searchInput matInput placeholder=\"{{ 'header.taskSearchInputPH' | translate:locale.language }}\" (keyup)=\"search()\">\n      </mat-form-field>\n    </form>\n  </ng-container>\n\n  <ng-container *ngIf=\"(isLoggedIn$ | async) && !isBoardsRoute\">\n    <button mat-raised-button color=\"accent\" routerLink=\"/boards\" l10nTranslate>\n      header.btnBoards\n    </button>\n  </ng-container>\n\n  <button mat-button routerLink=\"/boards\">Quadros</button>\n\n  <ng-container *ngIf=\"isLoggedIn$ | async\">\n    <ng-container *appRoleHasPermission=\"'admin'\">\n      <button mat-button [matMenuTriggerFor]=\"adminMenu\">Administração</button>\n      <mat-menu #adminMenu=\"matMenu\">\n        <button mat-menu-item routerLink=\"/admin/companies\">Gerenciar Empresas</button>\n      </mat-menu>\n    </ng-container>\n\n    <ng-container *appRoleHasPermission=\"'company'\">\n      <button mat-button [matMenuTriggerFor]=\"companyMenu\">Empresa</button>\n      <mat-menu #companyMenu=\"matMenu\">\n        <button mat-menu-item routerLink=\"/company/designers\">Gerenciar Projetistas</button>\n        <button mat-menu-item routerLink=\"/company/teams\">Gerenciar Equipes</button>\n      </mat-menu>\n    </ng-container>\n\n    <button mat-button routerLink=\"/account\">Minha Conta</button>\n    <button mat-button class=\"header__btn--profile\"\n        matTooltip=\"{{ 'header.btnEditTooltip' | translate:locale.language }}\"\n        routerLink=\"/login/profile\">\n        <mat-icon>account_circle</mat-icon>\n    </button>\n    <button mat-button class=\"header__btn--logout\"\n        matTooltip=\"{{ 'header.btnLogOutTooltip' | translate:locale.language }}\" (click)=\"onLogout()\">\n        <mat-icon>logout</mat-icon>\n    </button>\n  </ng-container>\n\n  <ng-container *ngIf=\"!(isLoggedIn$ | async)\">\n    <button mat-button class=\"header__btn--profile\"\n        matTooltip=\"{{ 'header.btnLogInTooltip' | translate:locale.language }}\"\n        routerLink=\"/auth/sign-in\">\n        <mat-icon>login</mat-icon>\n    </button>\n    <button mat-button class=\"header__btn--logout\"\n        matTooltip=\"{{ 'header.btnCreateTooltip' | translate:locale.language }}\"\n        routerLink=\"/auth/sign-up\">\n        <mat-icon>add_circle</mat-icon>\n    </button>\n  </ng-container>\n</mat-toolbar>\n\n<div class=\"loading\" *ngIf=\"isLoad\">\n  <mat-spinner></mat-spinner>\n</div>"]},"metadata":{},"sourceType":"module"}